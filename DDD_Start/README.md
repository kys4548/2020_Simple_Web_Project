# DDD

## 도메인 모델은 크게 엔티티와 벨류로 구분된다.

- ### Entity Type

  - 고유한 식별자를 가진다.
    - Entity의 식별자는 바뀌지 않고 고유하기 때문에 식별자가 같으면 두 Entity는 같다고 볼 수 있다.
  - Entity 생성 규칙
    - 특정 규칙에 맞게 생성<br>
      - ex) 현재시간을 덧붙인다.
    - UUID 사용<br>
      - ex) erwqrewqr4-324gsf2-sfwefw242-g2rg2
    - 값을 직접 입력<br>
      - ex) 주민등록 번호, email etc..
    - 일련번호 사용<br>
      - ex) Oracle Sequence, Mysql Auto Increment<br>
      - **Sequence의 경우 DB에서 Application으로 미리 식별자를 가져와 사용할 수 있다.**<br>
      - **Auto Increment의 경우 DB에 데이터를 저장할 때 식별자가 생성된다.**
  - Set메서드보다는 상황에 맞는 명확한 메서드 이름 사용
    - ex) setAddress() -> changeAddress()<br>

- ### Value Type
  - 완전한 하나를 표현할 때 사용<br>
    - 응집도
    - ex) 주소에 관한 정보들을 Address 라는 하나의 객체로 묶을 수 있다.
  - 고유한 식별자를 가지지 않는다.<br>
    - 고유한 식별자를 가지지 않기 때문에 내부의 모든 필드값이 같아야 두 value는 같다고 볼 수 있다.
  - 불변 객체로 사용한다.<br>
    - value Type이 Entity 내부에서 사용될 때 필드의 일부분이 변경되면 알기 힘들기 때문에 **안전성**을 고려하여 불변객체를 사용한다.
    - **set메서드 사용 금지**
  - 하나의 데이터를 사용하더라도 의미를 명확하게 표현할 수 있다.
    - ex) int price -> Money price
  - value type만을 위한 기능을 추가할 수 있다.
    - ex) Address.print();

<br><br>

> 1. 도메인 객체를 불완전한 상태로 사용하는 것을 막기 위해 생성시점에 필요한 모든것을 전해주어야 한다.<br>
>    생성자를 통해 필요한 데이터를 전부 받는 형태로 생성.<br>

> 2. JPA를 이용할 때는 지연로딩을 사용하기 위해 default 생성자가 있어야만 한다.<br>
>    proxy 객체가 Entity 객체를 상속받아 만들어지므로 접근제한은 protected 사용.

<br><br>

## 아키텍쳐 개요

<br>

### 표현 영역의 사용자 <-> 표현 영역 <-> 응용 영역 <-> 도메인 영역 <-> 인프라 스트럭쳐 영역

<br>

- ### 표현 영역의 사용자

  - 웹 브라우저
  - REST API를 사용하는 외부 시스템
  - ETC..

- ### 표현 영역

  - 사용자의 요청을 해석하고 알맞게 변환하여 응용 서비스에 전달.
  - 응용 서비스의 실행결과를 사용자가 이해할 수 있는 형식으로 변환하여 응답.

- ### 응용 영역

  - 도메인 영역의 도메인 모델을 이용하여 사용자에게 제공할 기능 구현.
  - 서비스 로직을 직접 수행하기보다는 도메인 모델에게 수행 위임.

- ### 도메인 영역

  - 도메인 모델을 만들고 도메인 모델의 핵심로직을 구현.

- ### 인프라 스트럭쳐 영역
      - 논리적인 개념보다는 실제 구현을 다룸
      - DB 연동 모듈, 메시징 모듈, 메일 발송 모듈 , ETC ..
  <br><br>

> 표현 영역, 응용 영역, 도메인 영역은 인프라 스트럭쳐 영역을 이용함으로써 구현 기술을 직접 만들지 않아도 된다.
> <br><br>
